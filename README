# adabru-markup

Markup-language based on Parsing Expression Grammar, autogenerated multipass packrat-parser, and librarybindings

## Known Bugs

- Scrolling in Firefix is not smooth. The global wheel listener somehow gets insufficient wheel events.

## Installation

### bower

└▪bower install adabru/adabru-markup↵

### npm

└▪npm install adabru/adabru-markup↵

### manually

Downloading zip from https://github.com/adabru/adabru-markup and extracting.

## Usage

### bower + manual

```html
<script src="./bower_components/adabru-markup/js/build/adabrumarkup.js"></script>

<body>
  <div id='app'>
  </div>
</body>

<script>
  fetch('markup/path/to/file.md, {method: 'get'}).then( r => r.text() ).then( data => {
      adabruMarkup.parseAndPrintDocument(data, document.querySelector('#app'))
  })
</script>
```

## Development

### Setup

- └▪git clone git://github.com/adabru/adabru-markup↵
- └▪cd adabru-markup↵
- └▪npm install↵
- `adabru-parser` is installed from github at the moment
  - └▪(cd node-modules/adabru-parser && npm install)↵
- └▪abp -g ./grammar/ab_markup.grammar -o ./html/js/build/ab_markup_grammar.json↵
- └▪abp verify ./dev/testdata 0 0 --init ↵
- └▪abp verify ./dev/testdata 0 1 --init ↵
- └▪webpack --config ./html/webpack.config.js --watch --devtool sourcemap↵

- prepare tests
- └▪./dev/grammar_test.ls --create-oracle↵

### Testing

- grammar modification
  - └▪abp -g ./grammar/ab_markup.grammar -o ./html/js/build/ab_markup_grammar.json↵
  - └▪abp verify ./dev/testdata 0 0↵
  - └▪abp verify ./dev/testdata 0 1↵

- benchmark grammar
  └▪abp bench ./dev/testdata 0 2↵

- React components in browser
  in browser console: 'ReactDOM.render(React.createElement(AdabruArticle),document.querySelector("#app"))'

- directory serving
  └▪./html/js/server.ls -d ./dev↵
  point browser to 'localhost:5555'

### Releasing

└▪npm version [major | minor | patch | …]↵
└▪git push↵

## Credits

This project was mentally derived from https://github.com/orlandohill/waxeye
